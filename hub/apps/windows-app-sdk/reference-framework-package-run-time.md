---
description: Learn about using the bootstrapper API to reference the Windows App SDK framework package at run time.
title: Reference the Windows App SDK framework package at run time
ms.topic: article
ms.date: 03/16/2022
ms.localizationpriority: medium
---

# Reference the Windows App SDK framework package at run time

If your app doesn't use MSIX for its deployment technology (it's either sparse-packaged or unpackaged) then you must initialize the Windows App SDK for use before you can call Windows App SDK features such as WinUI 3, app lifecycle, MRT Core, and DWriteCore. For the Windows App SDK 1.0 Stable, you can set a project property, `<WindowsPackageType>None</WindowsPackageType>` that generates the code required for initialization as part of the project build. That enables apps that don't use MSIX to take a dependency on the Windows App SDK *framework package* at run time.

For background information about framework packages, see [MSIX framework packages and dynamic dependencies](../desktop/modernize/framework-packages/framework-packages-overview.md).

## Behind the scenes, and opting out of automatic module initialization

The code generated by the `WindowsPackageType` property mentioned above leverages module initializers to call the bootstrapper API. The bootstrapper does the heavy lifting to find the Windows App SDK, and load it for the process. The generated code handles both initialization and shutdown.

If you want your app to have explicit control, then you can call the boostrapper API directly, early in your application's startup. In that case you don't need `WindowsPackageType` in your project file.

> [!NOTE]
> In addition to the automatic initialization and the bootstrapper API, the Windows App SDK also provides an implementation of the *dynamic dependency API*. This API enables your unpackaged apps to take a dependency on *any* framework package (not just the Windows App SDK framework package), and it is used internally by the bootstrapper API. For more information about the dynamic dependency API, see [Reference framework packages at run time](../desktop/modernize/framework-packages/use-the-dynamic-dependency-api.md).

### Opting out of automatic module initialization

If you set the `<WindowsAppSdkBootstrapInitialize>` project property in your project file, then that disables the automatic module initialization described above (the bootstrapper API isn't called). That allows your app to take responsibility.

## Using the bootstrapper API

The bootstrapper API consists of two C/C++ functions that are declared in the [mddbootstrap.h](/windows/windows-app-sdk/api/win32/mddbootstrap) header file in the Windows App SDK: [**MddBootstrapInitialize**](/windows/windows-app-sdk/api/win32/mddbootstrap/nf-mddbootstrap-mddbootstrapinitialize) and [**MddBootstrapShutdown**](/windows/windows-app-sdk/api/win32/mddbootstrap/nf-mddbootstrap-mddbootstrapshutdown). Those functions are provided by the [bootstrapper](deployment-architecture.md#bootstrapper) library in the Windows App SDK. That library is a small DLL that you must distribute with your app; it's not part of the framework package itself.

For a code example that demonstrates how to use the bootstrapper API to initialize the Windows App SDK runtime, see [Build and deploy an unpackaged app that uses the Windows App SDK](tutorial-unpackaged-deployment.md). For additional details, see the [dynamic dependencies specification](https://github.com/microsoft/WindowsAppSDK/blob/main/specs/dynamicdependencies/DynamicDependencies.md) on GitHub.

### MddBootstrapInitialize

This function initializes the calling process to use the version of the Windows App SDK framework package that best matches the criteria that you pass to the function parameters. Typically, that results in referencing the version of the framework package that matches the Windows App SDK NuGet package that's installed. If multiple packages meet the criteria, then the best candidate is selected. This function must be one of the first calls in the app's startup to ensure the bootstrapper component can properly initialize the Windows App SDK and add the run-time reference to the framework package.

This function also initializes the [Dynamic Dependency Lifetime Manager (DDLM)](deployment-architecture.md#dynamic-dependency-lifetime-manager-ddlm). That component provides infrastructure to prevent the OS from servicing the Windows App SDK framework package while it's being used by an unpackaged app.

### MddBootstrapShutdown

This function removes the changes to the current process that were made by a call to [**MddBootstrapInitialize**](/windows/windows-app-sdk/api/win32/mddbootstrap/nf-mddbootstrap-mddbootstrapinitialize). After this function is called, your app can no longer call Windows App SDK APIs, including the dynamic dependencies API.

This function also shuts down the [Dynamic Dependency Lifetime Manager (DDLM)](deployment-architecture.md#dynamic-dependency-lifetime-manager-ddlm) so that Windows can service the framework package as necessary.

## .NET wrapper for the bootstrapper API

Although you can call the C/C++ bootstrapper API directly from .NET apps, that requires the use of [platform invoke](/dotnet/framework/interop/consuming-unmanaged-dll-functions) to call the functions. In Windows App SDK 1.0 Preview 3 and later releases, a .NET wrapper for the bootstrapper API is available in the `Microsoft.WindowsAppRuntime.Bootstrap.Net.dll` assembly. That assembly provides an easier and more natural API for .NET developers to access the bootstrapper's functionality. The **Bootstrap** class provides static **Initialize**, **TryInitialize**, and **Shutdown** functions that wrap calls to the [**MddBootstrapInitialize**](/windows/windows-app-sdk/api/win32/mddbootstrap/nf-mddbootstrap-mddbootstrapinitialize) and [**MddBootstrapShutdown**](/windows/windows-app-sdk/api/win32/mddbootstrap/nf-mddbootstrap-mddbootstrapshutdown) functions for most common scenarios. For an example that demonstrates how to use the .NET wrapper for the bootstrapper API, see the C# instructions for 1.0 Preview 2 and later releases in [Build and deploy an unpackaged app that uses the Windows App SDK](tutorial-unpackaged-deployment.md?tabs=csharp-dotnet-preview2#instructions).

For more information about the .NET wrapper for the bootstrapper API, see these resources:

- [Section 6.1.4](https://github.com/microsoft/WindowsAppSDK/blob/main/specs/dynamicdependencies/DynamicDependencies.md#614-microsoftwindowsapplicationmodeldynamicdependency-c) of the dynamic dependencies specification.
- [Bootstrap.cs](https://github.com/microsoft/WindowsAppSDK/blob/main/dev/Bootstrap/CS/Microsoft.WindowsAppRuntime.Bootstrap.Net/Bootstrap.cs): The open source implementation of the .NET wrapper for the bootstrapper API.

## Related topics

- [Windows App SDK deployment guide for unpackaged apps](deploy-unpackaged-apps.md)
- [Dynamic dependencies specification](https://github.com/microsoft/WindowsAppSDK/blob/main/specs/dynamicdependencies/DynamicDependencies.md)
- [Runtime architecture for the Windows App SDK](deployment-architecture.md)
- [Build and deploy an unpackaged app that uses the Windows App SDK](tutorial-unpackaged-deployment.md)
